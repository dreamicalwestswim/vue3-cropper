{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue","webpack:///./src/App.vue?dfb6","webpack:///./src/components/Cropper.vue","webpack:///./src/components/utils.js","webpack:///./src/components/Cropper.vue?21ca","webpack:///./src/components/index.js","webpack:///./src/main.js","webpack:///./src/components/Cropper.vue?7a8e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","type","accept","onChange","previewImage","src","alt","style","cropperVisible","imagePath","fileType","onSave","onCancel","URL","webkitURL","setup","state","e","file","target","files","createObjectURL","res","render","to","$attrs","ref","onTouchStart","onTouchMove","onTouchEnd","loadComplete","img","showOutputSize","outputSizeInfo","width","height","fixedBox","onRotate","onReset","onCrop","toArray","Array","from","arrayBufferToDataURL","arrayBuffer","mimeType","chunks","chunkSize","uint8","Uint8Array","String","fromCharCode","subarray","btoa","join","objectURLToBlob","url","callback","http","XMLHttpRequest","open","responseType","onload","this","status","response","send","dataURLToArrayBuffer","dataURL","base64","replace","binary","atob","ArrayBuffer","charCodeAt","getStringFromCharCode","dataView","start","str","getUint8","dataURLToBlob","arr","split","format","match","u8arr","Blob","getOrientation","orientation","DataView","littleEndian","app1Start","ifdStart","byteLength","offset","exifIDCode","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","error","getImageArrayBuffer","Promise","reslove","reject","test","fileReader","FileReader","blob","readAsArrayBuffer","parseOrientation","rotate","scaleX","scaleY","inheritAttrs","props","cropSize","Number","default","imageType","quality","Boolean","maxImgSize","emits","emit","originalImage","left","top","scale","cropBox","outputSize","stage","canvas","document","createElement","ctx","getContext","imageRef","dragTarget","touchZoom","touchStartInfo","originalImageLeft","originalImageTop","cropLeft","cropTop","cropWidth","cropHeight","touches","Math","floor","correctionPicture","save","clearRect","translate","PI","drawImage","restore","toDataURL","loadImg","then","Image","min","initialState","prevImagePath","clientWidth","clientHeight","widthScale","heightScale","setOutputSize","cropBoxRelativeInfo","outsideAnchorX","outsideAnchorY","x","ceil","y","w","h","imgW","imgH","outWidth","outHeight","dataset","touchScale","oldTouch1","clientX","clientY","newTouch1","oldTouch2","newTouch2","oldL","sqrt","pow","newL","cha","coe","num","abs","preventDefault","disX","disY","zoomCanvas","zoomCtx","__scopeId","Cropper","install","app","component","createApp","App","use","mount"],"mappings":"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","file":"js/app.34123145.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","<template>\n  <div class=\"home\">\n    <input type=\"file\" accept=\"image/*\" @change=\"onChange\"/>\n    <img v-if=\"previewImage\" :src=\"previewImage\" alt=\"预览图\" style=\"max-width: 100%; max-height: 100%;\">\n    <Cropper v-if=\"cropperVisible\"\n             :imagePath=\"imagePath\"\n             fileType=\"blob\"\n             @save=\"onSave\"\n             @cancel=\"onCancel\"\n    />\n  </div>\n</template>\n\n<script>\n\n\nimport {reactive, toRefs} from 'vue'\nconst URL = window.URL || window.webkitURL;\nexport default {\n  name: 'App',\n  setup() {\n    const state = reactive({\n      cropperVisible: false,\n      imagePath: '',\n      previewImage: null\n    })\n\n    const onChange = (e) => {\n      const file = e.target.files[0]\n      state.imagePath = URL.createObjectURL(file);\n      state.cropperVisible = true\n    };\n\n    const onSave = (res) => {\n      if(typeof res === 'string')\n      {\n        state.previewImage = res\n      } else {\n        state.previewImage = URL.createObjectURL(res)\n      }\n      state.cropperVisible = false\n    };\n\n    const onCancel = () => {\n      state.cropperVisible = false\n    };\n\n    return {\n      ...toRefs(state),\n      onChange,\n      onSave,\n      onCancel\n    };\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=6bb2b01b\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n    <teleport to=\"body\">\r\n        <div class=\"cropper\" v-bind=\"$attrs\">\r\n            <div ref=\"stage\"\r\n                 class=\"cropper__stage\"\r\n                 @touchstart=\"onTouchStart\"\r\n                 @touchmove=\"onTouchMove\"\r\n                 @touchend=\"onTouchEnd\"\r\n                 :style=\"{visibility:loadComplete?'visible':'hidden'}\"\r\n            >\r\n\r\n                <img class=\"cropper__img\"\r\n                     ref=\"imageRef\"\r\n                     :src=\"img\"\r\n                     alt=\"\"\r\n                     :style=\"{\r\n                     transform: `translate3d(${originalImage.left}px,${originalImage.top}px,0) rotateZ(${originalImage.rotate}deg) scale(${originalImage.scale})`\r\n                 }\"\r\n                >\r\n\r\n                <div class=\"cropper__box\"\r\n                     :style=\"{\r\n                     width: `${cropBox.width}px`,\r\n                     height: `${cropBox.height}px`,\r\n                     transform: `translate3d(${cropBox.left}px,${cropBox.top}px,0)`\r\n                 }\"\r\n                >\r\n                    <div class=\"face\">\r\n                        <img :src=\"img\"\r\n                             alt=\"\"\r\n                             :style=\"{\r\n                             transform: `translate3d(${originalImage.left - cropBox.left}px,${originalImage.top - cropBox.top}px,0) rotateZ(${originalImage.rotate}deg) scale(${originalImage.scale})`\r\n                         }\"\r\n                        >\r\n                    </div>\r\n                    <div v-if=\"showOutputSize\" class=\"size-num\">\r\n                        {{`${outputSizeInfo.width} x ${outputSizeInfo.height}`}}\r\n                    </div>\r\n                    <div class=\"mask\" data-name=\"mask\"></div>\r\n                    <div class=\"line-top\"></div>\r\n                    <div class=\"line-right\"></div>\r\n                    <div class=\"line-bottom\"></div>\r\n                    <div class=\"line-left\"></div>\r\n                    <template v-if=\"!fixedBox\">\r\n                        <div class=\"dot-tl\" data-name=\"dot-tl\"></div>\r\n                        <div class=\"dot-tc\" data-name=\"dot-tc\"></div>\r\n                        <div class=\"dot-tr\" data-name=\"dot-tr\"></div>\r\n                        <div class=\"dot-rc\" data-name=\"dot-rc\"></div>\r\n                        <div class=\"dot-rb\" data-name=\"dot-rb\"></div>\r\n                        <div class=\"dot-bc\" data-name=\"dot-bc\"></div>\r\n                        <div class=\"dot-bl\" data-name=\"dot-bl\"></div>\r\n                        <div class=\"dot-lc\" data-name=\"dot-lc\"></div>\r\n                    </template>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class=\"cropper__control\">\r\n                <div class=\"cropper__icon-rotate\" @click=\"onRotate\" />\r\n            </div>\r\n            <div class=\"cropper__line\"></div>\r\n            <div class=\"cropper__control\">\r\n                <span @click=\"onCancel\">取消</span>\r\n                <span @click=\"onReset\">还原</span>\r\n                <span @click=\"onCrop\">选取</span>\r\n            </div>\r\n        </div>\r\n\r\n    </teleport>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {reactive, ref, toRefs, onMounted, computed, watch} from 'vue'\r\nimport {getOrientation, getImageArrayBuffer, dataURLToBlob, parseOrientation, arrayBufferToDataURL} from './utils'\r\n\r\nexport default {\r\n    name: 'Cropper',\r\n    inheritAttrs: false,\r\n    props: {\r\n        // 裁剪框大小\r\n        cropSize: {\r\n            type: Number,\r\n            default: 150\r\n        },\r\n        // 裁剪图路径(本地图片的路径或者图片的数据源base64|blob|file)\r\n        imagePath: String,\r\n        // 输出文件的类型(base64|blob)\r\n        fileType: String,\r\n        // 输出图片的格式(image/jpeg|image/png|image/webp) 其中 image/webp 只有 chrome 才支持\r\n        imageType: {\r\n            type: String,\r\n            default: 'image/jpeg'\r\n        },\r\n        // 输出图片的质量(0-1)并且只在格式为 image/jpeg 或 image/webp 时才有效，如果参数值格式不合法，将会被忽略并使用默认值。\r\n        quality: {\r\n            type: Number,\r\n            default: .9\r\n        },\r\n        // 固定裁剪框(不允许修改裁剪框尺寸)\r\n        fixedBox: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        // 展示输出图片的尺寸(可关闭)\r\n        showOutputSize: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        // 裁剪模式(高清模式|缩放模式)\r\n        mode: String,\r\n        // 传入的图片最大尺寸(超过这个尺寸会被压缩，手机端移动2000像素以上的图片会出现卡顿，严重影响到体验)\r\n        maxImgSize: {\r\n            type: Number,\r\n            default: 2000\r\n        }\r\n    },\r\n    emits: ['save', 'cancel'],\r\n    setup(props, { emit }) {\r\n        const state = reactive({\r\n            // 内部图片\r\n            img: '',\r\n            // 原图属性\r\n            originalImage: {\r\n                width: 0,\r\n                height: 0,\r\n                left: 0,\r\n                top: 0,\r\n                rotate: 0,\r\n                scale: 0\r\n            },\r\n            // 裁剪框\r\n            cropBox: {\r\n                width: 0,\r\n                height: 0,\r\n                left: 0,\r\n                top: 0\r\n            },\r\n            // 输出尺寸(根据图片比例裁剪框尺寸及裁剪的位置算出的实际尺寸)\r\n            outputSize: {\r\n                width: 0,\r\n                height: 0,\r\n            },\r\n            // 图片加载完成标记(图片加载完成才展示出stage，保证样式正确)\r\n            loadComplete: false,\r\n        })\r\n\r\n        // 舞台(就是裁剪可操作的区域)\r\n        let stage = ref()\r\n        // canvas 2d绘图\r\n        let canvas = document.createElement('canvas');\r\n        //document.body.appendChild(canvas)\r\n        let ctx = canvas.getContext('2d');\r\n        // 要绘制的图片对象\r\n        let imageRef = ref()\r\n        // 拖拽的目标\r\n        let dragTarget = null\r\n        // 手势缩放开关\r\n        let touchZoom = false\r\n        // 记录触摸开始的一些数据\r\n        let touchStartInfo = {\r\n            originalImageLeft: 0,\r\n            originalImageTop: 0,\r\n            cropLeft: 0,\r\n            cropTop: 0,\r\n            cropWidth: 0,\r\n            cropHeight: 0,\r\n            touches: []\r\n        }\r\n\r\n        // 输出尺寸信息\r\n        const outputSizeInfo = computed(()=>{\r\n            return props.mode === 'scale' ? {\r\n                width: Math.floor(state.outputSize.width * state.originalImage.scale),\r\n                height: Math.floor(state.outputSize.height * state.originalImage.scale)\r\n            } : {\r\n                width: state.outputSize.width,\r\n                height: state.outputSize.height\r\n            }\r\n        });\r\n\r\n        /**\r\n         * 手动校正图片(修正图片方向问题)\r\n         */\r\n        const correctionPicture = (img, width, height, orientation) => {\r\n            // 获取校正后的角度\r\n            const { rotate } = parseOrientation(orientation);\r\n\r\n            ctx.save();\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            // 旋转90度图片宽高需要调换\r\n            if(orientation === 6 || orientation === 8){\r\n                canvas.width = height;\r\n                canvas.height = width;\r\n            }\r\n\r\n            // 利用图片方向属性将图片角度往相反的角度旋转回0度(主要针对有exif方向信息的图片，只有照片才有这个属性)。\r\n            switch (orientation) {\r\n                // 1=0度图片(手机逆时针90度拍照)\r\n                //  case 1:\r\n                //  break;\r\n                // 3=180度图片(手机逆时针270度、顺时针90度拍照)\r\n                case 3:\r\n                    ctx.translate(width / 2, height / 2);\r\n                    ctx.rotate(rotate * Math.PI / 180);\r\n                    ctx.translate(-width / 2, -height / 2);\r\n                    break;\r\n                // 6=逆时针旋转90度图片(手机竖屏0度拍照)\r\n                case 6:\r\n                    ctx.translate(height / 2, width / 2);\r\n                    ctx.rotate(rotate * Math.PI / 180);\r\n                    ctx.translate(-width / 2, -height / 2);\r\n                    break;\r\n                // 8=顺时针旋转90度图片(手机竖屏正逆时针180度拍照)\r\n                case 8:\r\n                    ctx.translate(height / 2, width / 2);\r\n                    ctx.rotate(rotate * Math.PI / 180);\r\n                    ctx.translate(-width / 2, -height / 2);\r\n                    break;\r\n            }\r\n\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            ctx.restore();\r\n            return canvas.toDataURL(props.imageType, 1);\r\n        };\r\n\r\n        /**\r\n         * 读取图片流程\r\n         * 1 将图片数据转换成arrayBuffer二进制字节数组\r\n         * 2 识别图片方向\r\n         * 3 创建图片读取arrayBuffer转换的url,携带图片的原始数据\r\n         * 4 根据图片方向信息校正角度\r\n         */\r\n        const loadImg = () => {\r\n            if(!props.imagePath)return;\r\n            // win10显示角度正常，方向却是原始的值，直接按方向修复图片，那么显示角度就不对了，ios图片方向和显示角度一致，需要修复。(所以不直接使用系统提供的图片数据，因为不同的平台对图片的显示处理各不相同)\r\n            // 获取图片的原始二进制数据字节数组\r\n            getImageArrayBuffer(props.imagePath).then(arrayBuffer => {\r\n                // 先获取到图片的方向(避免系统自动根据图片方向修改图片显示角度,win10存在这个问题)\r\n                const orientation = getOrientation(arrayBuffer);\r\n                // 再去创建图片\r\n                let img = new Image();\r\n                img.onload = (e) => {\r\n                    let {width, height} = e.target;\r\n                    const {maxImgSize} = props;\r\n                    // 方向等于1是正常的，尺寸未超出最大尺寸不需要处理\r\n                    if(orientation === 1 && (!maxImgSize || width <= maxImgSize && height <= maxImgSize)){\r\n                        state.img = props.imagePath;\r\n                        state.originalImage.width = width\r\n                        state.originalImage.height = height\r\n                    } else {\r\n                        // 图片尺寸超过最大限制尺寸自动压缩尺寸\r\n                        if (maxImgSize && (width > maxImgSize || height > maxImgSize)) {\r\n                            let scale = Math.min(maxImgSize / width, maxImgSize / height);\r\n                            width*=scale;\r\n                            height*=scale;\r\n                        }\r\n                        // 使用校正过的最终数据\r\n                        state.img = correctionPicture(img, width, height, orientation);\r\n                        state.originalImage.width = canvas.width;\r\n                        state.originalImage.height = canvas.height;\r\n                    }\r\n                    state.loadComplete = true\r\n                    initialState()\r\n                };\r\n                // 读取原始的二进制字节数组转换的dataURL(图片会按照原始数据显示，不会被系统修改方向，保证了不同平台一致的显示效果。)\r\n                img.src = arrayBufferToDataURL(arrayBuffer,props.imageType);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * 组件挂载时触发\r\n         */\r\n        onMounted(() => {\r\n            loadImg();\r\n        });\r\n\r\n        /**\r\n         * 监听外部图片地址变化重新读取\r\n         */\r\n        watch(() => props.imagePath,\r\n            (imagePath, prevImagePath) => {\r\n            if(imagePath !== prevImagePath)\r\n                loadImg();\r\n            }\r\n        );\r\n\r\n        /**\r\n         * 设置初始状态\r\n         */\r\n        const initialState = () => {\r\n            const { width, height } = state.originalImage\r\n            let scale = 1\r\n            //图片尺寸超过舞台尺寸\r\n            if (width > stage.value.clientWidth || height > stage.value.clientHeight) {\r\n                //计算舞台区域占据图片的宽高比例\r\n                let widthScale = stage.value.clientWidth / width\r\n                let heightScale = stage.value.clientHeight / height\r\n                //取最小比例保证最长边能够显示出来\r\n                scale = Math.min(widthScale, heightScale);\r\n            }\r\n\r\n            state.originalImage.left = (stage.value.clientWidth - width) / 2\r\n            state.originalImage.top = (stage.value.clientHeight - height) / 2\r\n            state.originalImage.rotate = 0\r\n            state.originalImage.scale = scale\r\n            state.cropBox.width = props.cropSize\r\n            state.cropBox.height = props.cropSize\r\n            state.cropBox.left = (stage.value.clientWidth - props.cropSize) / 2\r\n            state.cropBox.top = (stage.value.clientHeight - props.cropSize) / 2\r\n            setOutputSize()\r\n        };\r\n\r\n        /**\r\n         * 裁剪框相对信息(就是相对原始图片的信息)\r\n         */\r\n        const cropBoxRelativeInfo = () => {\r\n            // 因为图片缩放是用比例来完成的，所以left、top、width、height并不会发生变化,需要拿这些原始信息进行换算，得到裁剪框与当前缩放过的图片一致的坐标和尺寸信息。\r\n            let { scale, rotate, width, height, left, top } = state.originalImage\r\n            // 因为图片是居中在舞台中间的，所以上右下左都可能会超过舞台，需要取超过的一半值加上自身x、y得到肉眼看到的坐标值\r\n            // 原图宽超出显示区域以外的中心点(需要这个值换算成真实的起始x)\r\n            let outsideAnchorX = (width * (1 - scale)) / 2\r\n            // 原图高超出显示区域以外的中心点(需要这个值换算成真实的起始y)\r\n            let outsideAnchorY = (height * (1 - scale)) / 2\r\n            // 截图的起始x(相对图片的x)\r\n            let x = Math.ceil((state.cropBox.left - (left + outsideAnchorX)) / scale)\r\n            // 截图的起始y(相对图片的y)\r\n            let y = Math.ceil((state.cropBox.top - (top + outsideAnchorY)) / scale)\r\n            // 截取的宽度(裁剪框/图片比例，让裁剪框和图片相同的比例下进行操作)\r\n            let w = Math.ceil(state.cropBox.width / scale)\r\n            // 截取的高度(原理同上)\r\n            let h = Math.ceil(state.cropBox.height / scale)\r\n\r\n            // 图片旋转90和270度的时候需要把图片宽转高，高转宽\r\n            // xy相对转换后的值\r\n            if (rotate === 90 || rotate === 270) {\r\n                x = x - (width - height) / 2\r\n                y = y - (height - width) / 2\r\n            }\r\n            return { x, y, w, h }\r\n        };\r\n\r\n        /**\r\n         * 计算输出尺寸(按照图片的比例选取的位置)\r\n         */\r\n        const setOutputSize = () => {\r\n            // 获取裁剪框的相对图片信息\r\n            let { x, y, w, h } = cropBoxRelativeInfo()\r\n\r\n            const { rotate, width, height} = state.originalImage\r\n            let imgW = width;\r\n            let imgH = height;\r\n            if (rotate === 90 || rotate === 270) {\r\n                imgW = height;\r\n                imgH = width;\r\n            }\r\n\r\n            // 输出尺寸默认等于裁剪框尺寸\r\n            let outWidth = w\r\n            let outHeight = h\r\n\r\n            // 裁剪框左边小于图片左边\r\n            if (x < 0) {\r\n                // 小于图片左边的x值是负数\r\n                // x + w 得到的是从图片的x开始计算到裁剪框宽度的位置，如果这个值大于图片宽，输出宽就等于图片宽\r\n                if (x + w > imgW) {\r\n                    outWidth = imgW\r\n                } else {\r\n                    // 如果x+w没有超过图片宽度直接取x+w得到裁剪框在图片里面的尺寸\r\n                    outWidth = x + w\r\n                }\r\n            } else {\r\n                // 裁剪框左边等于或者大于图片左边\r\n                // x + w 超过图片的宽度\r\n                if (x + w > imgW) {\r\n                    // 图片宽度减裁剪框的x，得到裁剪框在图片里面的尺寸\r\n                    outWidth = imgW - x\r\n                }\r\n            }\r\n\r\n            // y原理同上x一样\r\n            if (y < 0) {\r\n                if (y + h > imgH) {\r\n                    outHeight = imgH\r\n                } else {\r\n                    outHeight = y + h\r\n                }\r\n            } else {\r\n                if (y + h > imgH) {\r\n                    outHeight = imgH - y\r\n                }\r\n            }\r\n\r\n            // 裁剪框完全在图片的外面会出现负数，直接把输出尺寸设置成0\r\n            if (outWidth < 0 || outHeight < 0) {\r\n                outWidth = outHeight = 0\r\n            }\r\n\r\n            state.outputSize.width = outWidth\r\n            state.outputSize.height = outHeight\r\n        };\r\n\r\n        /**\r\n         * 旋转图片\r\n         */\r\n        const onRotate = () => {\r\n            // 顺时针每一轮加90度\r\n            let rotate = state.originalImage.rotate + 90\r\n            if (rotate >= 360) rotate = 0\r\n            state.originalImage.rotate = rotate\r\n            setOutputSize()\r\n        };\r\n\r\n        /**\r\n         * 还原\r\n         */\r\n        const onReset = () => {\r\n            initialState()\r\n        };\r\n\r\n        /**\r\n         * 触摸开始\r\n         */\r\n        const onTouchStart = (res) => {\r\n            // 获取到触摸的目标名\r\n            dragTarget = res.target.dataset.name\r\n            // 记录开始触摸的原图位置\r\n            touchStartInfo.originalImageLeft = state.originalImage.left\r\n            touchStartInfo.originalImageTop = state.originalImage.top\r\n            // 记录开始触摸的裁剪框信息\r\n            touchStartInfo.cropLeft = state.cropBox.left\r\n            touchStartInfo.cropTop = state.cropBox.top\r\n            touchStartInfo.cropWidth = state.cropBox.width\r\n            touchStartInfo.cropHeight = state.cropBox.height\r\n            // 记录开始的触摸手势信息\r\n            touchStartInfo.touches = res.touches\r\n            // 多指触碰屏幕开启手势缩放\r\n            if (touchStartInfo.touches.length > 1) {\r\n                touchZoom = true\r\n            }\r\n        };\r\n\r\n        /**\r\n         * 手势改变图片比例\r\n         */\r\n        const touchScale = (res) => {\r\n            let scale = state.originalImage.scale\r\n            // 记录变化量\r\n            // 第一根手指\r\n            let oldTouch1 = {\r\n                x: touchStartInfo.touches[0].clientX,\r\n                y: touchStartInfo.touches[0].clientY\r\n            };\r\n            let newTouch1 = {\r\n                x: res.touches[0].clientX,\r\n                y: res.touches[0].clientY\r\n            };\r\n            // 第二根手指\r\n            let oldTouch2 = {\r\n                x: touchStartInfo.touches[1].clientX,\r\n                y: touchStartInfo.touches[1].clientY\r\n            };\r\n            let newTouch2 = {\r\n                x: res.touches[1].clientX,\r\n                y: res.touches[1].clientY\r\n            };\r\n            let oldL = Math.sqrt(\r\n                Math.pow(oldTouch1.x - oldTouch2.x, 2) +\r\n                Math.pow(oldTouch1.y - oldTouch2.y, 2)\r\n            );\r\n            let newL = Math.sqrt(\r\n                Math.pow(newTouch1.x - newTouch2.x, 2) +\r\n                Math.pow(newTouch1.y - newTouch2.y, 2)\r\n            );\r\n            // 手势的差值\r\n            let cha = newL - oldL;\r\n            // 根据图片本身大小 决定每次改变大小的系数, 图片越大系数越小\r\n            // 1px - 0.2\r\n            let coe = 1;\r\n            coe =\r\n                coe / state.originalImage.width > coe / state.originalImage.height\r\n                    ? coe / state.originalImage.height\r\n                    : coe / state.originalImage.width;\r\n            coe = coe > 0.1 ? 0.1 : coe;\r\n            //系数乘以差值\r\n            let num = coe * cha;\r\n            if (cha > 0) {\r\n                scale += Math.abs(num);\r\n            } else if (cha < 0) {\r\n                scale > Math.abs(num) ? (scale -= Math.abs(num)) : scale;\r\n            }\r\n\r\n            if (scale > 1) scale = 1\r\n            else if (scale < 0.001) scale = 0\r\n\r\n            state.originalImage.scale = scale\r\n            // 缩放以后更新上一次的手势信息\r\n            touchStartInfo.touches = res.touches\r\n            setOutputSize()\r\n        };\r\n\r\n        /**\r\n         * 触摸移动\r\n         */\r\n        const onTouchMove = (res) => {\r\n            // 缩放图片防止浏览器放大缩小\r\n            res.preventDefault()\r\n            // 双指操作改变图片比例\r\n            if (res.touches.length === 2) {\r\n                touchScale(res)\r\n                return\r\n            }\r\n            // 正在缩放的情况下不触发单指操作\r\n            if (touchZoom) return\r\n            let { touches, originalImageLeft, originalImageTop, cropLeft, cropTop, cropWidth, cropHeight } = touchStartInfo\r\n            // 移动和触摸开始的xy距离\r\n            let disX = res.touches[0].clientX - touches[0].clientX\r\n            let disY = res.touches[0].clientY - touches[0].clientY\r\n            if (!dragTarget) {\r\n                // 没有拖拽目标名，就拖拽图片\r\n                state.originalImage.left = originalImageLeft + disX\r\n                state.originalImage.top = originalImageTop + disY\r\n            }\r\n            else {\r\n                // 改变裁剪框\r\n                let left = cropLeft, top = cropTop, width = cropWidth, height = cropHeight\r\n                switch (dragTarget) {\r\n                    case \"dot-tl\":\r\n                        width = cropWidth - disX\r\n                        height = cropHeight - disY\r\n                        left = cropLeft + disX\r\n                        top = cropTop + disY\r\n                        break;\r\n                    case \"dot-tc\":\r\n                        height = cropHeight - disY\r\n                        top = cropTop + disY\r\n                        break;\r\n                    case \"dot-tr\":\r\n                        width = cropWidth + disX\r\n                        height = cropHeight - disY\r\n                        top = cropTop + disY\r\n                        break;\r\n                    case \"dot-rc\":\r\n                        width = cropWidth + disX\r\n                        break;\r\n                    case \"dot-rb\":\r\n                        width = cropWidth + disX\r\n                        height = cropHeight + disY\r\n                        break;\r\n                    case \"dot-bc\":\r\n                        height = cropHeight + disY\r\n                        break;\r\n                    case \"dot-bl\":\r\n                        width = cropWidth - disX\r\n                        height = cropHeight + disY\r\n                        left = cropLeft + disX\r\n                        break;\r\n                    case \"dot-lc\":\r\n                        width = cropWidth - disX\r\n                        left = cropLeft + disX\r\n                        break;\r\n                    case 'mask':\r\n                        // 拖拽裁剪框\r\n                        left = cropLeft + disX\r\n                        top = cropTop + disY\r\n                        break;\r\n                }\r\n                if (left < 0) left = 0\r\n                if (top < 0) top = 0\r\n                if (left > stage.value.clientWidth) left = stage.value.clientWidth\r\n                if (top > stage.value.clientHeight) top = stage.value.clientHeight\r\n                if (left > stage.value.clientWidth - width) {\r\n                    left = stage.value.clientWidth - width\r\n                }\r\n                if (top > stage.value.clientHeight - height) {\r\n                    top = stage.value.clientHeight - height\r\n                }\r\n                if (width > stage.value.clientWidth) {\r\n                    width = stage.value.clientWidth\r\n                    left = 0\r\n                }\r\n                if (height > stage.value.clientHeight) {\r\n                    height = stage.value.clientHeight\r\n                    top = 0\r\n                }\r\n                if (width < 0) width = 0\r\n                if (height < 0) height = 0\r\n\r\n                // 修改裁剪框\r\n                state.cropBox.left = left\r\n                state.cropBox.top = top\r\n                state.cropBox.width = width\r\n                state.cropBox.height = height\r\n            }\r\n            setOutputSize()\r\n        };\r\n\r\n        /**\r\n         * 触摸结束\r\n         */\r\n        const onTouchEnd = (e) => {\r\n            // 手指全部离开才把缩放设为flash(避免缩放和单指操作冲突)\r\n            if (e.touches.length === 0) {\r\n                touchZoom = false\r\n            }\r\n        };\r\n\r\n        /**\r\n         * canvas裁剪\r\n         */\r\n        const onCrop = () => {\r\n            // 获得裁剪框相对原图的xy\r\n            let { x, y} = cropBoxRelativeInfo()\r\n            // 宽高用计算好的输出尺寸,否则ios又不对，真难伺候md\r\n            const {width:w,height:h} = state.outputSize\r\n            // 图片的当前信息\r\n            const { rotate, width: imgW, height: imgH } = state.originalImage\r\n\r\n            // ios不能是负数\r\n            x = x < 0 ? 0 : x\r\n            y = y < 0 ? 0 : y\r\n\r\n            ctx.save()\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n            canvas.width  = w;\r\n            canvas.height = h;\r\n            switch (rotate) {\r\n                case 0:\r\n                    ctx.drawImage(imageRef.value, x, y, w, h, 0, 0, w, h)\r\n                    break;\r\n                // 顺时针旋转90度\r\n                case 90:\r\n                    ctx.translate(imgH, 0)\r\n                    ctx.rotate(rotate / 180 * Math.PI)\r\n                    ctx.drawImage(imageRef.value, y, (-(x - imgH) - w), h, w, 0, (imgH - w), h, w)\r\n                    break;\r\n                // 顺时针旋转180度\r\n                case 180:\r\n                    ctx.translate(imgW, imgH)\r\n                    ctx.rotate(rotate / 180 * Math.PI)\r\n                    ctx.drawImage(imageRef.value, (-x + imgW) - w, (-y + imgH) - h, w, h, imgW - w, imgH - h, w, h)\r\n                    break;\r\n                // 顺时针旋转270度\r\n                case 270:\r\n                    ctx.translate(0, imgW)\r\n                    ctx.rotate(rotate / 180 * Math.PI)\r\n                    ctx.drawImage(imageRef.value, (-(y - imgW) - h), x, h, w, imgW - h, 0, h, w)\r\n                    break;\r\n            }\r\n            ctx.restore();\r\n\r\n            let target = canvas;\r\n            // 缩放模式绘图\r\n            if(props.mode === 'scale'){\r\n                let zoomCanvas = document.createElement('canvas')\r\n                let zoomCtx = zoomCanvas.getContext('2d')\r\n                zoomCanvas.width = (w * state.originalImage.scale)\r\n                zoomCanvas.height = (h * state.originalImage.scale)\r\n                zoomCtx.scale(zoomCanvas.width / w,zoomCanvas.height / h)\r\n                zoomCtx.drawImage(canvas,0,0)\r\n                target = zoomCanvas\r\n            }\r\n            let data = target.toDataURL(props.imageType, props.quality);\r\n            if(props.fileType === 'blob'){\r\n                data = dataURLToBlob(data)\r\n            }\r\n            emit('save',data)\r\n        };\r\n\r\n        /**\r\n         * 取消裁剪\r\n         */\r\n        const onCancel = () => {\r\n            initialState()\r\n            emit('cancel')\r\n        };\r\n\r\n        return {\r\n            stage,\r\n            imageRef,\r\n            ...toRefs(state),\r\n            onTouchStart,\r\n            onTouchMove,\r\n            onTouchEnd,\r\n            onRotate,\r\n            onReset,\r\n            onCrop,\r\n            onCancel,\r\n            outputSizeInfo\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n    .cropper {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #000;\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        display: flex;\r\n        flex-direction: column;\r\n        box-sizing: border-box;\r\n        padding-bottom: constant(safe-area-inset-bottom);\r\n        padding-bottom: env(safe-area-inset-bottom);\r\n    }\r\n\r\n    .cropper__stage {\r\n        flex: 1;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .cropper__img {\r\n        opacity: .4;\r\n    }\r\n\r\n    .cropper__box {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n\r\n    .face {\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        overflow: hidden;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n\r\n    .size-num{\r\n        padding: 5px 10px;\r\n        font-size: 10px;\r\n        color: #fff;\r\n        background-color: rgba(0, 0, 0, .8);\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n\r\n    .mask {\r\n        cursor: move;\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        background-color: #fff;\r\n        opacity: .06;\r\n    }\r\n\r\n    .line-top,\r\n    .line-bottom,\r\n    .line-left,\r\n    .line-right {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        background: url(\"data:image/gif;base64,R0lGODlhCAAIAIABACCL9v///yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxM0JGODRDRDlEODgxMUVBODc4ODk4QTE0Q0E2NkM3QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxM0JGODRDRTlEODgxMUVBODc4ODk4QTE0Q0E2NkM3QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEzQkY4NENCOUQ4ODExRUE4Nzg4OThBMTRDQTY2QzdCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEzQkY4NENDOUQ4ODExRUE4Nzg4OThBMTRDQTY2QzdCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQoAAQAsAAAAAAgACAAAAg2EERmna81UTAfRWeUsACH5BAkKAAEALAAAAAAIAAgAAAIPDA6hmGrnXlvQocjspbUAACH5BAkKAAEALAAAAAAIAAgAAAIPTIBgl5vq0GLQtFhpfaEAACH5BAkKAAEALAAAAAAIAAgAAAIPjIFgkXq52mJowlixe6gAACH5BAkKAAEALAAAAAAIAAgAAAINjAMJp2vNVEwH0VnlLAAh+QQJCgABACwAAAAACAAIAAACD0QeoJhq515b0KHI7KW1AAAh+QQJCgABACwAAAAACAAIAAACDwSCYZeb6tBi0LRYaX2gAAAh+QQFCgABACwAAAAACAAIAAACD4SDYZB6udpiaMJYsXuoAAA7\");\r\n    }\r\n\r\n    .line-top,\r\n    .line-bottom {\r\n        width: 100%;\r\n        height: 1px;\r\n    }\r\n\r\n    .line-bottom {\r\n        top: auto;\r\n        bottom: 0;\r\n    }\r\n\r\n    .line-left,\r\n    .line-right {\r\n        width: 1px;\r\n        height: 100%;\r\n    }\r\n\r\n    .line-right {\r\n        left: auto;\r\n        right: 0;\r\n    }\r\n\r\n    .dot-tl,\r\n    .dot-tc,\r\n    .dot-tr,\r\n    .dot-rc,\r\n    .dot-rb,\r\n    .dot-bc,\r\n    .dot-bl,\r\n    .dot-lc {\r\n        width: 23px;\r\n        height: 23px;\r\n        background-color: #39f;\r\n        position: absolute;\r\n        border-radius: 12.5px;\r\n        opacity: .5;\r\n    }\r\n\r\n    .dot-tl {\r\n        cursor: nw-resize;\r\n        top: -11px;\r\n        left: -11px;\r\n    }\r\n\r\n    .dot-tc {\r\n        cursor: n-resize;\r\n        left: 50%;\r\n        top: -11px;\r\n        margin-left: -11.5px;\r\n    }\r\n\r\n    .dot-tr {\r\n        cursor: ne-resize;\r\n        top: -11px;\r\n        right: -11px;\r\n    }\r\n\r\n    .dot-rc {\r\n        cursor: e-resize;\r\n        top: 50%;\r\n        margin-top: -11.5px;\r\n        right: -11px;\r\n    }\r\n\r\n    .dot-rb {\r\n        cursor: se-resize;\r\n        bottom: -11px;\r\n        right: -11px;\r\n    }\r\n\r\n    .dot-bc {\r\n        cursor: s-resize;\r\n        bottom: -11px;\r\n        left: 50%;\r\n        margin-left: -11.5px;\r\n    }\r\n\r\n    .dot-bl {\r\n        cursor: sw-resize;\r\n        bottom: -11px;\r\n        left: -11px;\r\n    }\r\n\r\n    .dot-lc {\r\n        cursor: w-resize;\r\n        top: 50%;\r\n        margin-top: -11.5px;\r\n        left: -11px;\r\n    }\r\n\r\n    .cropper__control {\r\n        display: flex;\r\n        height: 50px;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        color: #fff;\r\n        font-size: 14px;\r\n        padding: 0 15px;\r\n    }\r\n\r\n    .cropper__icon-rotate {\r\n        transform: rotateY(180deg);\r\n        width: 25px;\r\n        height: 27px;\r\n        display: inline-block;\r\n        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAA3CAYAAAChMHI8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNUI2ODJENkY5Q0QxMUU4OTdGMEM3QzFFQjk3N0E5RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNUI2ODJEN0Y5Q0QxMUU4OTdGMEM3QzFFQjk3N0E5RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI1QjY4MkQ0RjlDRDExRTg5N0YwQzdDMUVCOTc3QTlEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI1QjY4MkQ1RjlDRDExRTg5N0YwQzdDMUVCOTc3QTlEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+K3CBrQAAAZ1JREFUeNrsmDFLAzEYhu8Oa0UQi+JYUNBZ0bkoiCDu0l1w9DeIf8Ch4h/oJgji4CJWXQSh4uLoIthBXF262PgG7iAcPc8z1yR3vB88w0HyXZ4m96WJL4TwLMcEOAH7uol8yzLz4BysybHoJgssimyDp1Akl7AhI995CK7AbJ6JxwyLyMG3wc4okpuUWQ2/j4VRTrmJ2AMPKSLiF67Biisy06Cq0X8LdMERqCT/HCjNhmiCvtCPGzAz7B2m95kNcAFqmnlewSZ4t1ma70ED9IZt4Aksg1PQV9ougVswZ2uZqdTBS2z5pPVZBN1Yn0cwHrWxJSOpgbsMMpIqaMeEWi7IRIM7yyDjhTPRUWQGoOGCjEQWoeOMfWQ1+1SEnmUe34EjwH/jALSU590iy0yBDzAZVcrAK258gUvleT1I+U9ki79GR92nijwzXni4c+KkmUe8xe8AXKwAWe4DBlH7os+MjO+0k6ZvcDC6K6NSlm/GK1MBoAxlKEMZylCGMpShDGUoQxnKUIYylKEMZSiTEknXs4IzQxnKlF/mR4ABAKT7gnzK58lJAAAAAElFTkSuQmCC) no-repeat;\r\n        background-size: contain;\r\n    }\r\n\r\n    .cropper__line {\r\n        border-top: solid 1px #2a2a2a;\r\n        height: 0;\r\n    }\r\n\r\n</style>\r\n","export function toArray(value) {\r\n    return Array.from ? Array.from(value) : Array.slice.call(value);\r\n}\r\n\r\n// arrayBuffer转换成DataURL\r\nexport function arrayBufferToDataURL(arrayBuffer, mimeType) {\r\n    const chunks = [];\r\n\r\n    // Chunk Typed Array for better performance (#435)\r\n    const chunkSize = 8192;\r\n    let uint8 = new Uint8Array(arrayBuffer);\r\n\r\n    while (uint8.length > 0) {\r\n        // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\r\n        chunks.push(String.fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\r\n        uint8 = uint8.subarray(chunkSize);\r\n    }\r\n\r\n    return `data:${mimeType};base64,${btoa(chunks.join(''))}`;\r\n}\r\n\r\n// objectURL转换成Blob对象\r\nexport function objectURLToBlob(url, callback) {\r\n    var http = new XMLHttpRequest();\r\n    http.open(\"GET\", url, true);\r\n    http.responseType = \"blob\";\r\n    http.onload = function () {\r\n        if (this.status == 200 || this.status === 0) {\r\n            callback(this.response);\r\n        }\r\n    };\r\n    http.send();\r\n}\r\n\r\n// dataURL转换成ArrayBuffer\r\nexport function dataURLToArrayBuffer(dataURL) {\r\n    const base64 = dataURL.replace(/^data:.*,/, '');\r\n    const binary = atob(base64);\r\n    const arrayBuffer = new ArrayBuffer(binary.length);\r\n    const uint8 = new Uint8Array(arrayBuffer);\r\n\r\n    let i = binary.length;\r\n    while(i--){\r\n        uint8[i] = binary.charCodeAt(i);\r\n    }\r\n    return arrayBuffer;\r\n}\r\n\r\n// ArrayBuffer对象 Unicode码转字符串\r\nfunction getStringFromCharCode(dataView, start, length) {\r\n    var str = '';\r\n    var i;\r\n    for (i = start, length += start; i < length; i++) {\r\n        str += String.fromCharCode(dataView.getUint8(i));\r\n    }\r\n    return str;\r\n}\r\n\r\n/**\r\n * dataURL转换成Blob对象\r\n */\r\nexport function dataURLToBlob(dataURL) {\r\n    // base64拆分开\r\n    let arr = dataURL.split(',');\r\n    // 获取到格式\r\n    let format = arr[0].match(/:(.*?);/)[1];\r\n    // 获取到base64解码数据\r\n    let data = window.atob(arr[1]);\r\n    // 因为颜色数据刚好都是符合8位二进制的无符号整数,所以这里采用Uint8Array,8位无符号正整数数组来处理\r\n    let n = data.length;\r\n    let u8arr = new Uint8Array(n);\r\n    while(n--){\r\n        // 获得图像数据字符对应的Unicode编码，0-255之间\r\n        u8arr[n] = data.charCodeAt(n);\r\n    }\r\n    return new Blob([u8arr], {type:format});\r\n}\r\n\r\n\r\n/**\r\n * 获取方向值\r\n * @param {ArrayBuffer} arrayBuffer类型的图片数据\r\n * @returns {number} 返回方向值\r\n */\r\nexport function getOrientation(arrayBuffer) {\r\n    var dataView = new DataView(arrayBuffer);\r\n    var orientation; // 当图像没有正确的Exif信息时忽略范围错误(大部分图片是没有方向值的，只有照片图片才有方向值，如果是普通图片获取不到方向值直接返回1正常正常处理就行)\r\n\r\n    try {\r\n        var littleEndian;\r\n        var app1Start;\r\n        var ifdStart; // 仅处理JPEG图像 (start by 0xFFD8)\r\n\r\n        if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\r\n            var length = dataView.byteLength;\r\n            var offset = 2;\r\n\r\n            while (offset + 1 < length) {\r\n                if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\r\n                    app1Start = offset;\r\n                    break;\r\n                }\r\n\r\n                offset += 1;\r\n            }\r\n        }\r\n\r\n        if (app1Start) {\r\n            var exifIDCode = app1Start + 4;\r\n            var tiffOffset = app1Start + 10;\r\n\r\n            if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\r\n                var endianness = dataView.getUint16(tiffOffset);\r\n                littleEndian = endianness === 0x4949;\r\n\r\n                if (littleEndian || endianness === 0x4D4D\r\n                    /* bigEndian */\r\n                ) {\r\n                    if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\r\n                        var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\r\n\r\n                        if (firstIFDOffset >= 0x00000008) {\r\n                            ifdStart = tiffOffset + firstIFDOffset;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (ifdStart) {\r\n            var _length = dataView.getUint16(ifdStart, littleEndian);\r\n\r\n            var _offset;\r\n\r\n            var i;\r\n\r\n            for (i = 0; i < _length; i += 1) {\r\n                _offset = ifdStart + i * 12 + 2;\r\n\r\n                if (dataView.getUint16(_offset, littleEndian) === 0x0112\r\n                    /* Orientation */\r\n                ) {\r\n                    // 8 is the offset of the current tag's value\r\n                    _offset += 8; // Get the original orientation value\r\n\r\n                    orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\r\n\r\n                    dataView.setUint16(_offset, 1, littleEndian);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    } catch (error) {\r\n        orientation = 1;\r\n    }\r\n\r\n    return orientation;\r\n}\r\n\r\n/**\r\n * 获取图片数据ArrayBuffer存储格式\r\n * @param {imagePath} 图片路径或远程地址\r\n * @returns {ArrayBuffer} ArrayBuffer数据\r\n */\r\nexport function getImageArrayBuffer(imagePath) {\r\n    let data = null;\r\n    return new Promise((reslove, reject) => {\r\n        if (imagePath) {\r\n            // DataURI(base64地址)\r\n            if (/^data:/i.test(imagePath)) {\r\n                data = dataURLToArrayBuffer(imagePath);\r\n                reslove(data)\r\n            } else if (/^blob:/i.test(imagePath)) {\r\n                // ObjectURL(blob地址)\r\n                var fileReader = new FileReader();\r\n                fileReader.onload = function (e) {\r\n                    data = e.target.result;\r\n                    reslove(data)\r\n                };\r\n                objectURLToBlob(imagePath, function (blob) {\r\n                    fileReader.readAsArrayBuffer(blob);\r\n                });\r\n            } else {\r\n                // 普通图片地址\r\n                var http = new XMLHttpRequest();\r\n                http.onload = function () {\r\n                    if (this.status == 200 || this.status === 0) {\r\n                        data = http.response\r\n                        reslove(data)\r\n                    } else {\r\n                        throw \"Could not load image\";\r\n                    }\r\n                    http = null;\r\n                };\r\n                http.open(\"GET\", imagePath, true);\r\n                http.responseType = \"arraybuffer\";\r\n                http.send(null);\r\n            }\r\n        } else {\r\n            reject('img error')\r\n        }\r\n    })\r\n}\r\n\r\n/**\r\n * 解析Exif方向值。\r\n * @param {number} 方向值\r\n * @returns {Object} 解析好的校正数据\r\n */\r\nexport function parseOrientation(orientation) {\r\n    let rotate = 0;\r\n    let scaleX = 1;\r\n    let scaleY = 1;\r\n\r\n    switch (orientation) {\r\n        // Flip horizontal\r\n        case 2:\r\n            scaleX = -1;\r\n            break;\r\n        // 向左旋转180°\r\n        case 3:\r\n            rotate = -180;\r\n            break;\r\n        // Flip vertical\r\n        case 4:\r\n            scaleY = -1;\r\n            break;\r\n        // Flip vertical and rotate right 90°\r\n        case 5:\r\n            rotate = 90;\r\n            scaleY = -1;\r\n            break;\r\n        // 向右旋转90°\r\n        case 6:\r\n            rotate = 90;\r\n            break;\r\n        // Flip horizontal and rotate right 90°\r\n        case 7:\r\n            rotate = 90;\r\n            scaleX = -1;\r\n            break;\r\n        // 向左旋转90°\r\n        case 8:\r\n            rotate = -90;\r\n            break;\r\n    }\r\n\r\n    return {\r\n        rotate: rotate,\r\n        scaleX: scaleX,\r\n        scaleY: scaleY\r\n    };\r\n}\r\n","import { render } from \"./Cropper.vue?vue&type=template&id=e3713b5c&scoped=true\"\nimport script from \"./Cropper.vue?vue&type=script&lang=js\"\nexport * from \"./Cropper.vue?vue&type=script&lang=js\"\n\nimport \"./Cropper.vue?vue&type=style&index=0&id=e3713b5c&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-e3713b5c\"\n\nexport default script","import Cropper from \"./Cropper\";\r\n\r\nCropper.install = app => app.component(Cropper.name,Cropper)\r\n\r\nexport default Cropper\r\n","import { createApp } from 'vue'\nimport App from './App.vue'\nimport Cropper from \"./components\";\n\nconst app = createApp(App)\napp.use(Cropper)\n\napp.mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Cropper.vue?vue&type=style&index=0&id=e3713b5c&scoped=true&lang=scss\""],"sourceRoot":""}