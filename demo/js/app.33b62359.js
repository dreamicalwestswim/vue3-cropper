(function(e){function t(t){for(var o,n,r=t[0],l=t[1],h=t[2],p=0,u=[];p<r.length;p++)n=r[p],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(u.length)u.shift()();return c.push.apply(c,h||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],o=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(o=!1)}o&&(c.splice(t--,1),e=n(n.s=a[0]))}return e}var o={},i={app:0},c=[];function n(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=o,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var h=0;h<r.length;h++)t(r[h]);var d=l;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("7a23"),i={class:"home"};function c(e,t,a,c,n,r){var l=Object(o["p"])("Cropper");return Object(o["k"])(),Object(o["e"])("div",i,[Object(o["h"])("input",{type:"file",accept:"image/*",onChange:t[1]||(t[1]=function(){return c.onChange&&c.onChange.apply(c,arguments)})},null,32),e.previewImage?(Object(o["k"])(),Object(o["e"])("img",{key:0,src:e.previewImage,alt:"预览图",style:{"max-width":"100%","max-height":"100%"}},null,8,["src"])):Object(o["f"])("",!0),e.cropperVisible?(Object(o["k"])(),Object(o["e"])(l,{key:1,imagePath:e.imagePath,fileType:"blob",mode:"scale",onSave:c.onSave,onCancel:c.onCancel},null,8,["imagePath","onSave","onCancel"])):Object(o["f"])("",!0)])}a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d");var n=a("5530"),r={name:"App",setup:function(){var e=Object(o["n"])({cropperVisible:!1,imagePath:"",previewImage:null}),t=function(t){var a=t.target.files[0],o=new FileReader;o.onload=function(){e.imagePath=o.result,e.cropperVisible=!0},o.readAsDataURL(a)},a=function(t){e.previewImage="string"===typeof t?t:window.URL.createObjectURL(t),e.cropperVisible=!1},i=function(){e.cropperVisible=!1};return Object(n["a"])(Object(n["a"])({},Object(o["r"])(e)),{},{onChange:t,onSave:a,onCancel:i})}};r.render=c;var l=r,h=(a("b0c0"),a("99af"),Object(o["s"])("data-v-41cbaf4a"));Object(o["m"])("data-v-41cbaf4a");var d={class:"face"},p={key:0,class:"size-num"},u=Object(o["g"])('<div class="mask" data-name="mask" data-v-41cbaf4a></div><div class="line-top" data-v-41cbaf4a></div><div class="line-right" data-v-41cbaf4a></div><div class="line-bottom" data-v-41cbaf4a></div><div class="line-left" data-v-41cbaf4a></div>',5),s=Object(o["g"])('<div class="dot-tl" data-name="dot-tl" data-v-41cbaf4a></div><div class="dot-tc" data-name="dot-tc" data-v-41cbaf4a></div><div class="dot-tr" data-name="dot-tr" data-v-41cbaf4a></div><div class="dot-rc" data-name="dot-rc" data-v-41cbaf4a></div><div class="dot-rb" data-name="dot-rb" data-v-41cbaf4a></div><div class="dot-bc" data-name="dot-bc" data-v-41cbaf4a></div><div class="dot-bl" data-name="dot-bl" data-v-41cbaf4a></div><div class="dot-lc" data-name="dot-lc" data-v-41cbaf4a></div>',8),g={class:"cropper__control"},f=Object(o["h"])("div",{class:"cropper__line"},null,-1),v={class:"cropper__control"},b={style:{height:"0",overflow:"hidden",position:"absolute",left:"9999px"}};Object(o["l"])();var m=h((function(e,t,a,i,c,n){return Object(o["k"])(),Object(o["e"])(o["b"],{to:"body"},[Object(o["h"])("div",Object(o["i"])({class:"cropper"},e.$attrs),[Object(o["h"])("div",{ref:"stage",class:"cropper__stage",onTouchstart:t[2]||(t[2]=function(){return i.onTouchStart&&i.onTouchStart.apply(i,arguments)}),onTouchmove:t[3]||(t[3]=function(){return i.onTouchMove&&i.onTouchMove.apply(i,arguments)}),onTouchend:t[4]||(t[4]=function(){return i.onTouchEnd&&i.onTouchEnd.apply(i,arguments)}),style:{visibility:e.loadComplete?"visible":"hidden"}},[Object(o["h"])("img",{class:"cropper__img",ref:"imageRef",src:a.imagePath,alt:"",style:{transform:"translate3d(".concat(e.originalImage.left,"px,").concat(e.originalImage.top,"px,0) rotateZ(").concat(e.originalImage.rotate,"deg) scale(").concat(e.originalImage.scale,")")},onLoad:t[1]||(t[1]=function(){return i.onLoadComplete&&i.onLoadComplete.apply(i,arguments)})},null,44,["src"]),Object(o["h"])("div",{class:"cropper__box",style:{width:"".concat(e.cropBox.width,"px"),height:"".concat(e.cropBox.height,"px"),transform:"translate3d(".concat(e.cropBox.left,"px,").concat(e.cropBox.top,"px,0)")}},[Object(o["h"])("div",d,[Object(o["h"])("img",{src:a.imagePath,alt:"",style:{transform:"translate3d(".concat(e.originalImage.left-e.cropBox.left,"px,").concat(e.originalImage.top-e.cropBox.top,"px,0) rotateZ(").concat(e.originalImage.rotate,"deg) scale(").concat(e.originalImage.scale,")")}},null,12,["src"])]),a.showOutputSize?(Object(o["k"])(),Object(o["e"])("div",p,Object(o["q"])("".concat(i.outputSizeInfo.width," x ").concat(i.outputSizeInfo.height)),1)):Object(o["f"])("",!0),u,a.fixedBox?Object(o["f"])("",!0):(Object(o["k"])(),Object(o["e"])(o["a"],{key:1},[s],64))],4)],36),Object(o["h"])("div",g,[Object(o["h"])("div",{class:"cropper__icon-rotate",onClick:t[5]||(t[5]=function(){return i.onRotate&&i.onRotate.apply(i,arguments)})})]),f,Object(o["h"])("div",v,[Object(o["h"])("span",{onClick:t[6]||(t[6]=function(){return i.onCancel&&i.onCancel.apply(i,arguments)})},"取消"),Object(o["h"])("span",{onClick:t[7]||(t[7]=function(){return i.onReset&&i.onReset.apply(i,arguments)})},"还原"),Object(o["h"])("span",{onClick:t[8]||(t[8]=function(){return i.onCrop&&i.onCrop.apply(i,arguments)})},"选取")]),Object(o["h"])("view",b,[Object(o["h"])("canvas",{ref:"canvasRef",width:e.canvas.width,height:e.canvas.height},null,8,["width","height"])])],16)])})),w=(a("a9e3"),a("ac1f"),a("466d"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),{name:"Cropper",inheritAttrs:!1,props:{cropSize:{type:Number,default:150},imagePath:String,fileType:String,imageType:{type:String,default:"image/jpeg"},quality:{type:Number,default:.9},fixedBox:{type:Boolean,default:!1},showOutputSize:{type:Boolean,default:!0},mode:String},emits:["save","cancel"],setup:function(e,t){var a=t.emit,i=Object(o["n"])({originalImage:{width:0,height:0,left:0,top:0,rotate:0,scale:0},cropBox:{width:0,height:0,left:0,top:0},canvas:{width:0,height:0},outputSize:{width:0,height:0},loadComplete:!1}),c=Object(o["o"])(),r=Object(o["o"])(),l=null,h=Object(o["o"])(),d=null,p=!1,u={originalImageLeft:0,originalImageTop:0,cropLeft:0,cropTop:0,cropWidth:0,cropHeight:0,touches:[]},s=Object(o["c"])((function(){return"scale"===e.mode?{width:Math.floor(i.outputSize.width*i.originalImage.scale),height:Math.floor(i.outputSize.height*i.originalImage.scale)}:{width:i.outputSize.width,height:i.outputSize.height}}));Object(o["j"])((function(){l=r.value.getContext("2d")}));var g=function(e){i.originalImage.width=e.target.naturalWidth,i.originalImage.height=e.target.naturalHeight,i.loadComplete=!0,f()},f=function(){var t=i.originalImage,a=t.width,o=t.height,n=1;if(a>c.value.clientWidth||o>c.value.clientHeight){var r=c.value.clientWidth/a,l=c.value.clientHeight/o;n=Math.min(r,l)}i.originalImage.left=(c.value.clientWidth-a)/2,i.originalImage.top=(c.value.clientHeight-o)/2,i.originalImage.rotate=0,i.originalImage.scale=n,i.cropBox.width=e.cropSize,i.cropBox.height=e.cropSize,i.cropBox.left=(c.value.clientWidth-e.cropSize)/2,i.cropBox.top=(c.value.clientHeight-e.cropSize)/2,m(a,o),b()},v=function(){var e=i.originalImage,t=e.scale,a=e.rotate,o=e.width,c=e.height,n=e.left,r=e.top,l=o*(1-t)/2,h=c*(1-t)/2,d=Math.ceil((i.cropBox.left-(n+l))/t),p=Math.ceil((i.cropBox.top-(r+h))/t),u=Math.ceil(i.cropBox.width/t),s=Math.ceil(i.cropBox.height/t);return 90!==a&&270!==a||(d-=(o-c)/2,p-=(c-o)/2),{x:d,y:p,w:u,h:s}},b=function(){var e=v(),t=e.x,a=e.y,o=e.w,c=e.h,n=i.canvas,r=n.width,l=n.height,h=o,d=c;t<0?h=t+o>r?r:t+o:t+o>r&&(h=r-t),a<0?d=a+c>l?l:a+c:a+c>l&&(d=l-a),(h<0||d<0)&&(h=d=0),i.outputSize.width=h,i.outputSize.height=d},m=function(e,t){i.canvas.width=e,i.canvas.height=t},w=function(){var e=i.originalImage.rotate+90;e>=360&&(e=0),0===e||180===e?m(i.originalImage.width,i.originalImage.height):90!==e&&270!==e||m(i.originalImage.height,i.originalImage.width),i.originalImage.rotate=e,b()},O=function(){f()},j=function(e){d=e.target.dataset.name,u.originalImageLeft=i.originalImage.left,u.originalImageTop=i.originalImage.top,u.cropLeft=i.cropBox.left,u.cropTop=i.cropBox.top,u.cropWidth=i.cropBox.width,u.cropHeight=i.cropBox.height,u.touches=e.touches,u.touches.length>1&&(p=!0)},y=function(e){var t=i.originalImage.scale,a={x:u.touches[0].clientX,y:u.touches[0].clientY},o={x:e.touches[0].clientX,y:e.touches[0].clientY},c={x:u.touches[1].clientX,y:u.touches[1].clientY},n={x:e.touches[1].clientX,y:e.touches[1].clientY},r=Math.sqrt(Math.pow(a.x-c.x,2)+Math.pow(a.y-c.y,2)),l=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)),h=l-r,d=1;d=d/i.originalImage.width>d/i.originalImage.height?d/i.originalImage.height:d/i.originalImage.width,d=d>.1?.1:d;var p=d*h;h>0?t+=Math.abs(p):h<0&&t>Math.abs(p)&&(t-=Math.abs(p)),t>1?t=1:t<.001&&(t=0),i.originalImage.scale=t,u.touches=e.touches,b()},I=function(e){if(e.preventDefault(),2!==e.touches.length){if(!p){var t=u.touches,a=u.originalImageLeft,o=u.originalImageTop,n=u.cropLeft,r=u.cropTop,l=u.cropWidth,h=u.cropHeight,s=e.touches[0].clientX-t[0].clientX,g=e.touches[0].clientY-t[0].clientY;if(d){var f=n,v=r,m=l,w=h;switch(d){case"dot-tl":m=l-s,w=h-g,f=n+s,v=r+g;break;case"dot-tc":w=h-g,v=r+g;break;case"dot-tr":m=l+s,w=h-g,v=r+g;break;case"dot-rc":m=l+s;break;case"dot-rb":m=l+s,w=h+g;break;case"dot-bc":w=h+g;break;case"dot-bl":m=l-s,w=h+g,f=n+s;break;case"dot-lc":m=l-s,f=n+s;break;case"mask":f=n+s,v=r+g;break}f<0&&(f=0),v<0&&(v=0),f>c.value.clientWidth&&(f=c.value.clientWidth),v>c.value.clientHeight&&(v=c.value.clientHeight),f>c.value.clientWidth-m&&(f=c.value.clientWidth-m),v>c.value.clientHeight-w&&(v=c.value.clientHeight-w),m>c.value.clientWidth&&(m=c.value.clientWidth,f=0),w>c.value.clientHeight&&(w=c.value.clientHeight,v=0),m<0&&(m=0),w<0&&(w=0),i.cropBox.left=f,i.cropBox.top=v,i.cropBox.width=m,i.cropBox.height=w}else i.originalImage.left=a+s,i.originalImage.top=o+g;b()}}else y(e)},x=function(e){0===e.touches.length&&(p=!1)},S=function(){var e=v(),t=e.x,a=e.y,o=i.outputSize,c=o.width,n=o.height,r=i.originalImage,d=r.rotate,p=r.width,u=r.height;switch(t=t<0?0:t,a=a<0?0:a,l.save(),l.clearRect(0,0,i.canvas.width,i.canvas.height),d){case 0:l.drawImage(h.value,t,a,c,n,t,a,c,n);break;case 90:l.translate(u,0),l.rotate(d/180*Math.PI),l.drawImage(h.value,a,-(t-u)-c,n,c,a,-(t-u)-c,n,c);break;case 180:l.translate(p,u),l.rotate(d/180*Math.PI),l.drawImage(h.value,-t+p-c,-a+u-n,c,n,-t+p-c,-a+u-n,c,n);break;case 270:l.translate(0,p),l.rotate(d/180*Math.PI),l.drawImage(h.value,-(a-p)-n,t,n,c,-(a-p)-n,t,n,c);break}B(t,a,c,n)},k=function(e){var t=e.split(","),a=t[0].match(/:(.*?);/)[1],o=window.atob(t[1]),i=o.length,c=new Uint8Array(i);while(i--)c[i]=o.charCodeAt(i);return new Blob([c],{type:a})},C=function(t,a,o){var c=document.createElement("canvas"),n=c.getContext("2d");c.width=a,c.height=o,n.putImageData(t,0,0);var r=c;if("scale"===e.mode){var l=document.createElement("canvas"),h=l.getContext("2d");l.width=a*i.originalImage.scale,l.height=o*i.originalImage.scale,h.scale(l.width/a,l.height/o),h.drawImage(c,0,0),r=l}return r.toDataURL(e.imageType,e.quality)},B=function(t,o,i,c){l.restore();var n=C(l.getImageData(t,o,i,c),i,c);"blob"===e.fileType&&(n=k(n)),a("save",n)},M=function(){f(),a("cancel")};return Object(n["a"])(Object(n["a"])({stage:c,canvasRef:r,imageRef:h,onLoadComplete:g},Object(o["r"])(i)),{},{onTouchStart:j,onTouchMove:I,onTouchEnd:x,onRotate:w,onReset:O,onCrop:S,onCancel:M,outputSizeInfo:s})}});a("9aea");w.render=m,w.__scopeId="data-v-41cbaf4a";var O=w;O.install=function(e){return e.component(O.name,O)};var j=O,y=Object(o["d"])(l);y.use(j),y.mount("#app")},6677:function(e,t,a){},"9aea":function(e,t,a){"use strict";a("6677")}});
//# sourceMappingURL=app.33b62359.js.map